
@{
    ViewData["Title"] = "Home";
    Layout = "_Layout";
}

<h1 class="uk-heading-divider">Home</h1>
<div class="uk-grid-margin-small">
    <input name="serach" class="uk-search uk-search-field uk-grid-width-small-1-3" placeholder="Serach.." />
    <button class="uk-button-primary uk-grid-width-large-1-1" style="padding:10px">Search</button>
    <button class="uk-button-primary uk-grid-width-large-1-1" style="padding:10px">Add</button>
</div>
<table class="uk-table uk-table-hover uk-table-striped">
    <caption>Users</caption>
    <thead>
        <tr v-for="cols in cols">
            <th>{{col}}</th>
            <th></th>
        </tr>
        <tr>
            <td>Gaspard</td>
            <td>Lammertyn</td>
            <td>E-mail</td>
            <td>12/05/1998</td>
            <td>Belgium</td>
            <td>
                <a class="uk-button-primary" style="padding:10px">Edit</a>
                <a class="uk-button-danger" style="padding:10px">Delete</a>
            </td>
        </tr>
    </thead>
</table>

@section Scripts{
    <script>
        var baseUrl = 'https://localhost:5001/api/countries';
        var app = new Vue({
            el: '#app',
            data: {
                rows: []
            },

            created: function () {
                var self = this;
                self.GetData();
            },

            computed: {
                "Columns": function generateColumns() {
                    if (this.rows.length > 0) {
                        return [];
                    }
                    return Object.keys(this.row[0])
                },

                methods: {
                    GetData: function () {
                        axios.get(`${baseUrl}/countries/users`)
                            .then(function (response) {
                                if (response.data != null)
                                    AddData(data);
                                else
                                    console.log(response.data);
                            })
                            .catch(function (error) {
                                self.Error = error.response.data
                            });
                    },

                    AddData: function (data) {
                        data.foreach(function () {
                            rows.push({
                                newData{
                                FirstName: data.firstName,
                                LastName: data.lastName,
                                Email: data.email,
                                BirthDate: data.birthDate,
                                Nationality: data.nationality,
                            }
                                }
                                })
                            });
                        }
                    }
    </script>
}

